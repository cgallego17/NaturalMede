{% extends 'audit/base.html' %}
{% load static %}

{% block page_title_text %}Dashboard de Auditoría{% endblock %}
{% block page_title_display %}Dashboard de Auditoría{% endblock %}

{% block page_actions %}
    <a href="{% url 'audit:log_list' %}" class="btn btn-primary">
        <i class="fas fa-list"></i> Ver Logs
    </a>
    <a href="{% url 'audit:export' %}" class="btn btn-success">
        <i class="fas fa-download"></i> Exportar
    </a>
{% endblock %}

{% block breadcrumb %}
    <li class="breadcrumb-item active">Dashboard</li>
{% endblock %}

{% block extra_css %}
<style>
.stat-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-card.critical {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
}

.stat-card.warning {
    background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);
}

.stat-card.success {
    background: linear-gradient(135deg, #48dbfb 0%, #0abde3 100%);
}

.stat-card.info {
    background: linear-gradient(135deg, #a55eea 0%, #26de81 100%);
}

.stat-number {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 0.9rem;
    opacity: 0.9;
}

.chart-container {
    background: white;
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.event-item {
    background: white;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    border-left: 4px solid #ddd;
    transition: all 0.3s ease;
}

.event-item:hover {
    transform: translateX(5px);
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.event-item.critical {
    border-left-color: #ff6b6b;
}

.event-item.warning {
    border-left-color: #feca57;
}

.event-item.success {
    border-left-color: #48dbfb;
}

.event-time {
    font-size: 0.8rem;
    color: #666;
}

.event-message {
    font-weight: 500;
    margin: 5px 0;
}

.event-user {
    font-size: 0.9rem;
    color: #888;
}
</style>
{% endblock %}

{% block page_content %}
    <div class="alert alert-info" role="alert">
        <h4 class="alert-heading">
            <i class="fas fa-info-circle"></i>
            Dashboard Temporalmente Simplificado
        </h4>
        <p>{{ error_message }}</p>
        <hr>
        <p class="mb-0">
            <a href="{% url 'audit:log_list' %}" class="btn btn-primary">
                <i class="fas fa-list"></i> Ver Logs de Auditoría
            </a>
            <a href="{% url 'audit:export' %}" class="btn btn-success">
                <i class="fas fa-download"></i> Exportar Logs
            </a>
        </p>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-info-circle text-primary"></i>
                        Información del Sistema de Auditoría
                    </h5>
                </div>
                <div class="card-body">
                    <p>El dashboard de auditoría está temporalmente simplificado para resolver problemas de rendimiento.</p>
                    <p>Puedes acceder a los datos completos a través de:</p>
                    <ul>
                        <li><strong>Lista de Logs:</strong> Ver todos los eventos de auditoría con filtros</li>
                        <li><strong>Exportar Logs:</strong> Descargar información en formato CSV</li>
                        <li><strong>Detalles de Eventos:</strong> Ver información específica de cada evento</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<!-- JavaScript eliminado temporalmente para resolver problemas de rendimiento -->
{% endblock %}
