{% extends 'purchases/base.html' %}

{% block page_title_text %}{% if supplier %}Editar Proveedor{% else %}Nuevo Proveedor{% endif %}{% endblock %}
{% block page_title_display %}{% if supplier %}Editar Proveedor{% else %}Nuevo Proveedor{% endif %}{% endblock %}

{% block page_actions %}
    <a href="{% url 'purchases:supplier_list' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Volver
    </a>
{% endblock %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'purchases:supplier_list' %}">Proveedores</a></li>
    <li class="breadcrumb-item active">{% if supplier %}Editar{% else %}Nuevo{% endif %}</li>
{% endblock %}

{% block page_content %}
    <form method="post">
        {% csrf_token %}
        
        <div class="row">
            <!-- Información Principal -->
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="m-0 font-weight-bold text-primary">
                            <i class="fas fa-info-circle"></i> Información del Proveedor
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.name.id_for_label }}" class="form-label">Nombre del Proveedor *</label>
                                    {{ form.name }}
                                    {% if form.name.errors %}
                                        <div class="text-danger">{{ form.name.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.contact_person.id_for_label }}" class="form-label">Persona de Contacto</label>
                                    {{ form.contact_person }}
                                    {% if form.contact_person.errors %}
                                        <div class="text-danger">{{ form.contact_person.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="text-danger">{{ form.email.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.phone.id_for_label }}" class="form-label">Teléfono</label>
                                    {{ form.phone }}
                                    {% if form.phone.errors %}
                                        <div class="text-danger">{{ form.phone.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.address.id_for_label }}" class="form-label">Dirección</label>
                            {{ form.address }}
                            {% if form.address.errors %}
                                <div class="text-danger">{{ form.address.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.city.id_for_label }}" class="form-label">Ciudad</label>
                                    {{ form.city }}
                                    {% if form.city.errors %}
                                        <div class="text-danger">{{ form.city.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.tax_id.id_for_label }}" class="form-label">NIT/RUT</label>
                                    {{ form.tax_id }}
                                    {% if form.tax_id.errors %}
                                        <div class="text-danger">{{ form.tax_id.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.payment_terms.id_for_label }}" class="form-label">Términos de Pago</label>
                            {{ form.payment_terms }}
                            {% if form.payment_terms.errors %}
                                <div class="text-danger">{{ form.payment_terms.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.notes.id_for_label }}" class="form-label">Notas</label>
                            {{ form.notes }}
                            {% if form.notes.errors %}
                                <div class="text-danger">{{ form.notes.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <div class="form-check">
                                {{ form.is_active }}
                                <label class="form-check-label" for="{{ form.is_active.id_for_label }}">
                                    Proveedor Activo
                                </label>
                            </div>
                            {% if form.is_active.errors %}
                                <div class="text-danger">{{ form.is_active.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de Información -->
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="m-0 font-weight-bold text-primary">
                            <i class="fas fa-info-circle"></i> Información
                        </h6>
                    </div>
                    <div class="card-body">
                        <h6>Campos Requeridos</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-success"></i> Nombre del Proveedor</li>
                        </ul>
                        
                        <hr>
                        
                        <h6>Campos Opcionales</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-info text-info"></i> Persona de Contacto</li>
                            <li><i class="fas fa-info text-info"></i> Email</li>
                            <li><i class="fas fa-info text-info"></i> Teléfono</li>
                            <li><i class="fas fa-info text-info"></i> Dirección</li>
                            <li><i class="fas fa-info text-info"></i> Ciudad</li>
                            <li><i class="fas fa-info text-info"></i> NIT/RUT</li>
                            <li><i class="fas fa-info text-info"></i> Términos de Pago</li>
                            <li><i class="fas fa-info text-info"></i> Notas</li>
                        </ul>
                        
                        <hr>
                        
                        <h6>Estado del Proveedor</h6>
                        <p><strong>Activo:</strong> Puede ser seleccionado en nuevas compras</p>
                        <p><strong>Inactivo:</strong> No aparece en listas de selección</p>
                    </div>
                </div>

                <!-- Botones -->
                <div class="card">
                    <div class="card-body">
                        <button type="submit" class="btn btn-primary btn-block mb-2">
                            <i class="fas fa-save"></i> {% if supplier %}Actualizar Proveedor{% else %}Crear Proveedor{% endif %}
                        </button>
                        <a href="{% url 'purchases:supplier_list' %}" class="btn btn-secondary btn-block">
                            <i class="fas fa-times"></i> Cancelar
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </form>
{% endblock %}
